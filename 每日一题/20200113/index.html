<html>
    <script>
        /*
            Day218
        */
        // 代码片段一：是否存在堆栈溢出错误? => 没有堆栈溢出
        // let id = 0
        // function foo() {
        //     // console.log(id);
        //     id = setTimeout(foo, 0);
        // }
        // foo();
        /*
            js 并发模型基于 事件循环
            浏览器提供运行时环境来执行 js 代码
            浏览器主要组件：调用堆栈、事件循环、任务队列、Web API
            分析片段一
                该片段可以理解为：无限调用 foo 函数
                由于每次调用时，函数体已经调用完成（调用堆栈完成出栈）
                所以堆栈最多保留一个函数，因此不会造成堆栈溢出
        */
    </script>
    <script>
        // 代码片段二:如果在控制台中运行以下函数，页面(选项卡)的 UI 是否仍然响应? => 会有无响应情况
        // Reason：Render process gone.
        function foo() {
            Promise.resolve().then(foo);
            // return Promise.resolve().then(foo);
        }
        foo()
        /*
            js中有 宏任务 和 微任务
                setTimeout的回调是宏任务
                Promise的回调是微任务
            执行过程：
                宏任务在单个循环周期中一次一个的进入 执行堆栈
                微任务队列总是在宏任务 执行后出栈前 将被清空
                若微任务队列一直无法被清空，会造成事件阻塞，因此会无法处理其他事件（渲染、交互、点击等）
            分析片段二
                每次调用foo，都会在微任务队列中添加另一个foo回调
                微任务队列永远无法清空
                因此会阻止事件循环的完成，从而也无法进行渲染
        */
    </script>
    <p>123</p>
    <p>123</p>
    <p>123</p>
    <p>123</p>
    <p>123</p>
    <p>123</p>
    <p>123</p>
    <p>123</p>
    <p>123</p>
    <p>123</p>
    <p>123</p>
    <p>123</p>
    <p>123</p>
    <p>123</p>
    <p>123</p>
    <p>123</p>
    <p>123</p>
    <p>123</p>
    <p>123</p>
    <p>123</p>
    <p>123</p>
    <p>123</p>
    <p>123</p>
    <p>123</p>
    <p>123</p>
    <p>123</p>
    <p>123</p>
    <p>123</p>
    <p>123</p>
    <p>123</p>
    <p>123</p>
    <p>123</p>
    <p>123</p>
    <p>123</p>
    <p>123</p>
    <p>123</p>
    <p>123</p>
    <p>123</p>
    <p>123</p>
    <p>123</p>
    <p>123</p>
    <p>123</p>
    <p>123</p>
    <p>123</p>
    <p>123</p>
    <p>123</p>
    <p>123</p>
    <p>123</p>
    <p>123</p>
    <p>123</p>
    <p>123</p>
    <p>123</p>
    <p>123</p>
    <p>123</p>
    <p>123</p>
    <p>123</p>
    <p>123</p>
    <p>123</p>
    <p>123</p>
    <p>123</p>
    <p>123</p>
    <p>123</p>
    <p>123</p>
    <p>123</p>
    <p>123</p>
    <p>123</p>
    <p>123</p>
    <p>123</p>
    <p>123</p>
    <p>123</p>
    <p>123</p>
    <p>123</p>
    <p>123</p>
    <p>123</p>
    <p>123</p>
</html>
